Cinderella
===
è‡ªå‹•åŒ–å¸³å–®åˆ†æï¼Œåˆ©ç”¨ BeanCount å¯¦ç¾å…¨è‡ªå‹•è¨˜å¸³

## Introduction

[Beancount](https://github.com/beancount/beancount) æ˜¯ä¸€å€‹ç´”æ–‡å­—æª”[è¤‡å¼è¨˜å¸³](https://zh.wikipedia.org/wiki/å¤å¼ç°¿è®°)å·¥å…·ã€‚ç¶²è·¯ä¸Šæœ‰é—œè¤‡å¼è¨˜å¸³çš„ç‰¹æ€§åŠå¥½è™•æ–‡ç« çœ¾å¤šï¼Œåœ¨æ­¤ä¸å†è´…è¿°ã€‚å’Œ Beancount æœ‰é—œçš„ç°¡ä»‹å’Œä½¿ç”¨æ–¹å¼å¯ä»¥åƒè€ƒä»–çš„ [æ–‡ä»¶](https://beancount.github.io/docs/) å’Œ [CheatSheet](https://beancount.github.io/docs/beancount_cheat_sheet.html)ï¼Œé¸ç”¨ BeanCount é™¤äº†ä»–æ˜¯é–‹æºè¤‡å¼è¨˜å¸³å·¥å…·ï¼Œä¹Ÿå› ç‚ºä»–æ˜¯ç´”æ–‡å­—æª”è¨˜éŒ„ï¼Œå–®ç´”ä¸”å®¹æ˜“ä»¥ç¨‹å¼è‡ªå‹•åŒ–ï¼Œä¸”èƒ½ä»¥ [Fava](https://github.com/beancount/fava) ä¾†è¦–è¦ºåŒ–ã€‚

**Cinderella** èƒ½å¤ è‡ªå‹•åˆ†æéŠ€è¡Œçš„å¸³æˆ¶ã€ä¿¡ç”¨å¡å°å¸³å–®ï¼Œå’Œé›»å­ç™¼ç¥¨è¨˜éŒ„ï¼Œ**ä¸¦ä¾ç…§ä½¿ç”¨è€…å®šç¾©çš„é—œéµå­—åˆ†é¡é–‹éŠ·æ­¸æˆ¶**ã€‚æœ€å¾Œç”¢ç”Ÿ BeanCount æ ¼å¼æª”æ¡ˆã€‚å¯ä»¥å…ˆåƒè€ƒ [Fava Demo](https://fava.pythonanywhere.com)ã€‚

## æ”¯æ´çš„å°å¸³å–®

ç›®å‰æ”¯æ´è‡ªå‹•åˆ†æä¸‹åˆ—å–®ä½å°å¸³å–®ï¼Œæœªä¾†æœƒç¹¼çºŒå¢åŠ ã€‚æ­¡è¿ç›´æ¥ PR æˆ– Feature Request (å¦‚æœæˆ‘æœ‰ç©ºçš„è©±)ã€‚

| é‡‘èå–®ä½         | å¸³æˆ¶å°å¸³å–®  | ä¿¡ç”¨å¡     | **Cinderella è­˜åˆ¥å­—**  | å‚™è¨» |
| -----------     | ----------- | ----------- | ----------- | ----------- |
| è²¡æ”¿éƒ¨é›»å­ç™¼ç¥¨    | âœ… (csv)  |â–         | `receipt`         | æ¯é€±/æœˆå¯„çš„åŒ¯æ•´é€šçŸ¥  |
| ä¸­è¯éƒµæ”¿         | âœ… (csv)  |âŒ         | `post`            | ç¶²éŠ€ä¸‹è¼‰           |   
| å°æ–°éŠ€è¡Œ(Richart)| âœ… (excel)|âœ… (excel) | `taishin`         | APP ç”³è«‹ï¼Œéœ€åˆ†é–‹ worksheet åˆ°ä¸åŒæª”æ¡ˆ |
| æ°¸è±éŠ€è¡Œ         | âœ… (csv)* |âœ… (csv)   | `sinopac`         | ç¶²éŠ€ä¸‹è¼‰   |
| ä¸­åœ‹ä¿¡è¨—         | ğŸš€        |ğŸš€         |                   |                   |
| ç‰å±±éŠ€è¡Œ         | ğŸš€        |ğŸš€         |                   |                   |
| åœ‹æ³°ä¸–è¯         | ğŸš€        |ğŸš€         |                   |                   |

> ğŸš€: å·²è¦åŠƒæ”¯æ´

> *ï¼šéœ€æ‰‹å‹•è¤‡è£½ç¶²éŠ€è¡¨æ ¼å¾Œè²¼ä¸Š

> Cinderella è­˜åˆ¥å­—: Cinderella ç”¨æ–¼è­˜åˆ¥ä¸€å€‹é‡‘èæ©Ÿæ§‹


## ä½¿ç”¨

### ç³»çµ±éœ€æ±‚

+ `Python`  >= 3.9
+ ç›®å‰åªåœ¨ `macOS Big Sur` ä¸Šæ¸¬è©¦

### å®‰è£

+ ä¸‹è¼‰å°ˆæ¡ˆ
```
git clone https://github.com/daniel0076/Cinderella
```

+ å®‰è£ Python packages (æ¨è–¦ä½¿ç”¨ [pipenv](https://pipenv.pypa.io/en/latest/))
+ åœ¨å°ˆæ¡ˆç›®éŒ„ä¸‹
```
pipenv install
pipenv shell
```
æˆ– (ä½¿ç”¨ [virtualenv](https://virtualenv.pypa.io/en/latest/) ç­‰)
```
pip install -r requirements.txt
```

### æº–å‚™å°å¸³å–®

1. å»ºç«‹ **å°å¸³å–®è³‡æ–™å¤¾** (ä¾‹ `statements`ï¼Œå¯ç”¨ä»»æ„åç¨±)
2. åœ¨ **å°å¸³å–®è³‡æ–™å¤¾** ä¸­æŒ‰å»ºç«‹é¡åˆ¥å­è³‡æ–™å¤¾
    + å¸³æˆ¶å°å¸³å–®ï¼š`bank`
    + ä¿¡ç”¨å¡å¸³å–®ï¼š`card`
    + é›»å­ç™¼ç¥¨è¨˜éŒ„ï¼š`receipt`
3. ä¸‹è¼‰å„é‡‘èæ©Ÿæ§‹å°å¸³å–®ï¼ŒæŒ‰ç…§é¡åˆ¥æ”¾å…¥ä¸Šä¸€æ­¥å»ºçš„å­è³‡æ–™å¤¾
4. ä¾å°å¸³å–®çš„é‡‘èæ©Ÿæ§‹ï¼Œå°‡ **Cinderella è­˜åˆ¥å­—** åŠ å…¥å°å¸³å–®çš„æª”åï¼Œåªè¦è­˜åˆ¥å­—æœ‰åœ¨æª”åä¸­å³ï¼Œä¾‹å¦‚
    + ç™¼ç¥¨è¨˜éŒ„ï¼š`receipt-202108.csv`
    + ä¸­è¯éƒµæ”¿å°å¸³å–®ï¼š`2021-post.csv`
5. ç¯„ä¾‹å°å¸³å–®è³‡æ–™å¤¾
```
statements
|-- card
|   |-- taishin-2021.excel
|
|-- bank
    |-- sinopac-202108.csv
```

6. å¾€å¾Œåªè¦æŠŠæ–°çš„å°å¸³å–®æ”¾å…¥ç›¸æ‡‰è³‡æ–™å¤¾ï¼ŒCinderella æœƒæ‰¹æ¬¡è™•ç†
7. å»ºç«‹ BeanCount è³‡æ–™å¤¾
 + æ¯”å¦‚ `beans`
 + å¯ä»¥ä¿®æ”¹ `main.bean` å»è®€å–ä¸åŒè³‡æ–™å¤¾ä¸­çš„ `bean` æª”æ¡ˆ
   
### åŸ·è¡Œ

```
python3 cinderella/main.py PATH_TO_STATEMENTS PATH_TO_BEANCOUNT
fava main.bean  # å•Ÿå‹• GUIï¼Œåœ¨ localhost:5000
```
+ ç¯„ä¾‹


```
python3 cinderella/main.py ./statements ./beans
fava main.bean  # å•Ÿå‹• GUIï¼Œåœ¨ localhost:5000
```

### è‡ªè¨‚æ¶ˆè²»é …ç›®åˆ†é¡(æ­¸æˆ¶)

Cinderella èƒ½å¤ ä¾ç…§ä½¿ç”¨è€…æä¾›çš„é—œéµå­—åœ¨å°å¸³å–®é …ç›®ä¸­æ¯”å°ï¼Œå°‡æŸç­†æ”¶æ”¯æ­¸æˆ¶åˆ°è‡ªå®šç¾©çš„é¡åˆ¥ä¸‹

Cinderella çš„ [`configs/mappings`](https://github.com/daniel0076/Cinderella/tree/main/Cinderella/configs/mappings) è³‡æ–™å¤¾ä¸‹å­˜æ”¾äº†è‡ªè¨‚çš„é—œéµå­—å’Œå°æ‡‰çš„é¡åˆ¥

+ é€šç”¨æ­¸é¡ ([`general.json`](https://github.com/daniel0076/Cinderella/tree/main/Cinderella/configs/mappings/general.json))ï¼šæ”¶éŒ„äº†å¸¸ç”¨çš„æ­¸é¡ï¼Œå¯ç…§éœ€æ±‚è‡ªè¡Œä¿®æ”¹
+ ç‰¹ç”¨æ­¸é¡ï¼šå…¶å®ƒæŒ‰ç…§ **Cinderella è­˜åˆ¥å­—** å‘½åçš„æª”æ¡ˆï¼Œæä¾›äº†é‡å°ä¸åŒé‡‘èæ©Ÿæ§‹çš„æ­¸é¡é—œéµå­—ï¼Œåªç”¨è©²é‡‘èæ©Ÿæ§‹å°å¸³å–®ã€‚

**Cinderella å°‡å„ªå…ˆä½¿ç”¨ç‰¹ç”¨çš„æ­¸é¡é …ç›®**

## å¾Œè¨˜

Cinderella?

å°æ™‚å€™çœ‹ç°å§‘å¨˜ä¸€ç›´è¨˜å¾— Cinderella æœ‰æŒ‘è±†å­çš„æ©‹æ®µã€‚ä¸éå•äº†èº«é‚Šå¥½å¤šæœ‹å‹ï¼Œéƒ½æ²’æœ‰äººå°é€™æ®µæœ‰å°è±¡ã€‚[ä½† Cinderella çœŸçš„æœ‰æŒ‘è±†å­çš„?](https://sites.pitt.edu/~dash/grimm021.html)ä¸è«–å¦‚ä½•ï¼Œå°±è®“ Cinderella ä¾†å¹«æˆ‘å€‘åš bean counting å§
